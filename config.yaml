# Market Maker Bot Configuration
# ===============================
# Edit this file to customize settings. Environment variables override these values.

# API Configuration
api:
  endpoint: "https://craft.blocky.com.br/api/v1"
  # API key should be set via BLOCKY_API_KEY environment variable for security

# Trading Parameters
trading:
  dry_run: false                  # Set true to simulate without real orders
  enabled_markets: []             # Whitelist: empty = all markets, otherwise only these
  disabled_markets: []            # Blacklist: never trade these
  # Example: disabled_markets: [sand_iron, dirt_iron]
  spread: 0.05                    # 5% spread (0.05 = 5%)
  min_spread_ticks: 0.01          # Minimum spread in price units
  target_value: 5.0               # Fallback target value (used if dynamic allocation disabled)
  max_quantity: 6400              # Maximum order quantity
  refresh_interval: 60            # Seconds between integrity checks

# Dynamic Capital Allocation (Portfolio Management)
capital_allocation:
  enabled: true                   # Enable dynamic allocation based on inventory
  base_reserve_ratio: 0.10        # Minimum 10% reserve
  max_reserve_ratio: 0.30         # Maximum 30% reserve
  min_order_value: 0.10           # Minimum order value in Iron
  priority_markets: [diam_iron, gold_iron, slme_iron]  # Higher allocation for these
  priority_boost: 1.5             # 50% more allocation for priority markets

# Rate Limiting
rate_limit:
  max_requests: 30                # Requests per window
  window_seconds: 1.0             # Window duration in seconds

# Circuit Breaker
circuit_breaker:
  failure_threshold: 5            # Failures before opening circuit
  recovery_timeout: 30.0          # Seconds before trying recovery
  half_open_max_calls: 3          # Max calls in half-open state

# Metrics
metrics:
  persistence_path: "metrics_data.json"
  auto_save_interval: 60          # Seconds between auto-saves

# Alerts
# Set ALERT_WEBHOOK_URL environment variable to enable
alerts:
  enabled: true
  webhook_type: "discord"         # discord, slack, telegram, custom
  min_level: "warning"            # info, warning, error, critical
  rate_limit_seconds: 60          # Minimum seconds between same alerts

# Logging
logging:
  level: "INFO"                   # DEBUG, INFO, WARNING, ERROR
  colored_output: true

# Price Model
price_model:
  cache_ttl: 60                   # Seconds to cache supply metrics
  
  # Base prices (Iron) for known commodities
  base_prices:
    diam_iron: 50.0
    gold_iron: 5.0
    lapi_iron: 2.0
    coal_iron: 0.5
    ston_iron: 0.1
    cobl_iron: 0.05
    dirt_iron: 0.01
    sand_iron: 0.05
    olog_iron: 0.45
    obsn_iron: 2.5
    slme_iron: 5.0

# Dynamic Spread Calculation
# Spread is calculated as: base_spread + volatility_adj + inventory_adj
dynamic_spread:
  enabled: true                     # Set to false to use fixed spread from trading.spread
  base_spread: 0.03                 # 3% base spread
  volatility_multiplier: 2.0        # Higher = more sensitive to volatility
  inventory_impact: 0.02            # Max spread adjustment from inventory imbalance
  min_spread: 0.01                  # 1% minimum spread
  max_spread: 0.15                  # 15% maximum spread
  volatility_window: 24             # Hours of OHLCV data to consider

# Health Endpoint
# Exposes /health for external monitoring (uptime robots, Kubernetes, etc.)
health:
  enabled: true                     # Set to false to disable health endpoint
  port: 8080                        # Port for health HTTP server

# Desktop Notifications
# Shows desktop notifications with sound when trades are executed
notifications:
  enabled: true                     # Set to false to disable all notifications
  sound_enabled: true               # Set to false to disable notification sounds
  notify_on_trade: true             # Notify when a trade is executed
  notify_on_error: false            # Notify on critical errors
